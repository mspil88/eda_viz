from flask import Flask, request, session, make_response, render_template
from flask_jsglue import JSGlue
import pandas as pd
import os


app = Flask(__name__)

jsglue = JSGlue()
jsglue.init_app(app)

@app.route("/")
def index():
    user = request
    sess = session
    print(sess)
    print(app.url_map)
    print(user)
    res = make_response('<h1> hi there </h1>')
    res.set_data('''{stuff: 5}''')
    res.status_code = 200
    return res


@app.route("/relationships")
def relationships():
    o = {'pearson': {'PassengerId': {'PassengerId': 1.0,
   'Survived': -0.0050066607670665175,
   'Pclass': -0.03514399403038102,
   'Age': 0.036847197861327674,
   'SibSp': -0.0575268337844415,
   'Parch': -0.0016520124027188366,
   'Fare': 0.012658219287491099},
  'Survived': {'PassengerId': -0.0050066607670665175,
   'Survived': 1.0,
   'Pclass': -0.33848103596101514,
   'Age': -0.07722109457217756,
   'SibSp': -0.035322498885735576,
   'Parch': 0.08162940708348335,
   'Fare': 0.2573065223849626},
  'Pclass': {'PassengerId': -0.03514399403038102,
   'Survived': -0.33848103596101514,
   'Pclass': 1.0,
   'Age': -0.36922601531551735,
   'SibSp': 0.08308136284568686,
   'Parch': 0.018442671310748508,
   'Fare': -0.5494996199439076},
  'Age': {'PassengerId': 0.036847197861327674,
   'Survived': -0.07722109457217756,
   'Pclass': -0.36922601531551735,
   'Age': 1.0,
   'SibSp': -0.30824675892365666,
   'Parch': -0.1891192626320352,
   'Fare': 0.09606669176903912},
  'SibSp': {'PassengerId': -0.0575268337844415,
   'Survived': -0.035322498885735576,
   'Pclass': 0.08308136284568686,
   'Age': -0.30824675892365666,
   'SibSp': 1.0,
   'Parch': 0.41483769862015624,
   'Fare': 0.159651043242161},
  'Parch': {'PassengerId': -0.0016520124027188366,
   'Survived': 0.08162940708348335,
   'Pclass': 0.018442671310748508,
   'Age': -0.1891192626320352,
   'SibSp': 0.41483769862015624,
   'Parch': 1.0,
   'Fare': 0.21622494477076448},
  'Fare': {'PassengerId': 0.012658219287491099,
   'Survived': 0.2573065223849626,
   'Pclass': -0.5494996199439076,
   'Age': 0.09606669176903912,
   'SibSp': 0.159651043242161,
   'Parch': 0.21622494477076448,
   'Fare': 1.0}},
 'spearman': {'PassengerId': {'PassengerId': 1.0,
   'Survived': -0.005006660767066498,
   'Pclass': -0.03409135008914179,
   'Age': 0.04100991613236293,
   'SibSp': -0.06116076582604884,
   'Parch': 0.0012351780934194748,
   'Fare': -0.013975133780990471},
  'Survived': {'PassengerId': -0.005006660767066498,
   'Survived': 1.0,
   'Pclass': -0.3396679366500525,
   'Age': -0.052565300044694487,
   'SibSp': 0.08887948468090501,
   'Parch': 0.13826563286545587,
   'Fare': 0.3237361394448083},
  'Pclass': {'PassengerId': -0.03409135008914179,
   'Survived': -0.3396679366500525,
   'Pclass': 1.0,
   'Age': -0.36166557503434504,
   'SibSp': -0.04301876651204207,
   'Parch': -0.022801341928590464,
   'Fare': -0.6880316726256096},
  'Age': {'PassengerId': 0.04100991613236293,
   'Survived': -0.052565300044694487,
   'Pclass': -0.36166557503434504,
   'Age': 1.0,
   'SibSp': -0.1820612589179174,
   'Parch': -0.2542121174301802,
   'Fare': 0.13505121773428777},
  'SibSp': {'PassengerId': -0.06116076582604884,
   'Survived': 0.08887948468090501,
   'Pclass': -0.04301876651204207,
   'Age': -0.1820612589179174,
   'SibSp': 1.0,
   'Parch': 0.45001397100861634,
   'Fare': 0.4471129882944581},
  'Parch': {'PassengerId': 0.0012351780934194748,
   'Survived': 0.13826563286545587,
   'Pclass': -0.022801341928590464,
   'Age': -0.2542121174301802,
   'SibSp': 0.45001397100861634,
   'Parch': 1.0,
   'Fare': 0.4100738082761382},
  'Fare': {'PassengerId': -0.013975133780990471,
   'Survived': 0.3237361394448083,
   'Pclass': -0.6880316726256096,
   'Age': 0.13505121773428777,
   'SibSp': 0.4471129882944581,
   'Parch': 0.4100738082761382,
   'Fare': 1.0}},
 'kendall': {'PassengerId': {'PassengerId': 1.0,
   'Survived': -0.004090214762393426,
   'Pclass': -0.026824400986911346,
   'Age': 0.02754181401332336,
   'SibSp': -0.04839417859092306,
   'Parch': 0.0007978451239667482,
   'Fare': -0.008920866826633959},
  'Survived': {'PassengerId': -0.004090214762393426,
   'Survived': 1.0,
   'Pclass': -0.32353318439409545,
   'Age': -0.043385054517253836,
   'SibSp': 0.08591509091074537,
   'Parch': 0.13393261225325737,
   'Fare': 0.2662286416742869},
  'Pclass': {'PassengerId': -0.026824400986911346,
   'Survived': -0.32353318439409545,
   'Pclass': 1.0,
   'Age': -0.2860814161328999,
   'SibSp': -0.03955236574306877,
   'Parch': -0.021019471733083554,
   'Fare': -0.5735307309748154},
  'Age': {'PassengerId': 0.02754181401332336,
   'Survived': -0.043385054517253836,
   'Pclass': -0.2860814161328999,
   'Age': 1.0,
   'SibSp': -0.14274551945143282,
   'Parch': -0.20011172214961384,
   'Fare': 0.0932489072038393},
  'SibSp': {'PassengerId': -0.04839417859092306,
   'Survived': 0.08591509091074537,
   'Pclass': -0.03955236574306877,
   'Age': -0.14274551945143282,
   'SibSp': 1.0,
   'Parch': 0.4252407973704515,
   'Fare': 0.35826215386190535},
  'Parch': {'PassengerId': 0.0007978451239667482,
   'Survived': 0.13393261225325737,
   'Pclass': -0.021019471733083554,
   'Age': -0.20011172214961384,
   'SibSp': 0.4252407973704515,
   'Parch': 1.0,
   'Fare': 0.3303597642072928},
  'Fare': {'PassengerId': -0.008920866826633959,
   'Survived': 0.2662286416742869,
   'Pclass': -0.5735307309748154,
   'Age': 0.0932489072038393,
   'SibSp': 0.35826215386190535,
   'Parch': 0.3303597642072928,
   'Fare': 1.0}}}

    s = {'scatterplot_data': {'PassengerId': [1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 21, 22, 23, 24, 25, 26, 28, 31, 34, 35, 36, 38, 39, 40, 41, 42, 44, 45, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62, 63, 64, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 79, 80, 81, 82, 84, 85, 86, 87, 89, 90, 91, 92, 93, 94, 95, 97, 98, 99, 100, 101, 103, 104, 105, 106, 107, 109, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 123, 124, 125, 126, 128, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 156, 157, 158, 161, 162, 163, 164, 165, 166, 168, 170, 171, 172, 173, 174, 175, 176, 178, 179, 180, 183, 184, 185, 188, 189, 190, 191, 192, 193, 194, 195, 196, 198, 200, 201, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 216, 217, 218, 219, 220, 221, 222, 223, 225, 226, 227, 228, 229, 231, 232, 233, 234, 235, 237, 238, 239, 240, 243, 244, 245, 246, 247, 248, 249, 250, 252, 253, 254, 255, 256, 258, 259, 260, 262, 263, 264, 266, 267, 268, 269, 270, 272, 273, 274, 276, 277, 279, 280, 281, 282, 283, 284, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 297, 298, 300, 303, 306, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 326, 327, 328, 329, 330, 332, 333, 334, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 349, 350, 351, 353, 354, 356, 357, 358, 361, 362, 363, 364, 366, 367, 370, 371, 372, 373, 374, 375, 377, 378, 379, 380, 381, 382, 383, 384, 386, 387, 388, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 413, 415, 417, 418, 419, 420, 422, 423, 424, 425, 427, 428, 430, 431, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 446, 447, 448, 449, 450, 451, 453, 454, 456, 457, 459, 461, 462, 463, 464, 466, 468, 470, 472, 473, 474, 475, 477, 478, 479, 480, 481, 483, 484, 485, 487, 488, 489, 490, 492, 493, 494, 495, 497, 499, 500, 501, 502, 504, 505, 506, 507, 509, 510, 511, 513, 514, 515, 516, 517, 519, 520, 521, 522, 524, 526, 527, 529, 530, 531, 533, 535, 536, 537, 538, 540, 541, 542, 543, 544, 545, 546, 547, 549, 550, 551, 552, 554, 555, 556, 557, 559, 560, 562, 563, 566, 567, 568, 570, 571, 572, 573, 575, 576, 577, 578, 580, 581, 582, 583, 584, 586, 587, 588, 589, 591, 592, 593, 595, 596, 598, 600, 601, 604, 605, 606, 607, 608, 609, 610, 611, 615, 616, 617, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 631, 632, 633, 635, 636, 637, 638, 639, 641, 642, 643, 645, 646, 647, 648, 650, 652, 653, 655, 656, 658, 659, 660, 661, 662, 663, 664, 665, 666, 667, 669, 671, 672, 673, 674, 676, 677, 678, 679, 680, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 694, 695, 696, 697, 699, 700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 711, 713, 714, 715, 716, 717, 718, 720, 721, 722, 723, 724, 725, 726, 727, 729, 730, 731, 732, 734, 735, 736, 737, 738, 742, 743, 744, 745, 746, 747, 748, 749, 750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760, 762, 763, 764, 765, 766, 768, 770, 771, 772, 773, 775, 776, 778, 780, 781, 782, 783, 785, 786, 787, 788, 789, 790, 792, 795, 796, 797, 798, 799, 800, 801, 802, 803, 804, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815, 817, 818, 819, 820, 821, 822, 823, 824, 825, 828, 830, 831, 832, 834, 835, 836, 837, 839, 841, 842, 843, 844, 845, 846, 848, 849, 851, 852, 853, 854, 855, 856, 857, 858, 859, 861, 862, 863, 865, 866, 867, 868, 870, 871, 872, 873, 874, 875, 876, 877, 878, 880, 881, 882, 883, 884, 885, 886, 887, 888, 890, 891], 'Age': [22.0, 38.0, 26.0, 35.0, 35.0, 54.0, 2.0, 27.0, 14.0, 4.0, 58.0, 20.0, 39.0, 14.0, 55.0, 2.0, 31.0, 35.0, 34.0, 15.0, 28.0, 8.0, 38.0, 19.0, 40.0, 66.0, 28.0, 42.0, 21.0, 18.0, 14.0, 40.0, 27.0, 3.0, 19.0, 18.0, 7.0, 21.0, 49.0, 29.0, 65.0, 21.0, 28.5, 5.0, 11.0, 22.0, 38.0, 45.0, 4.0, 29.0, 19.0, 17.0, 26.0, 32.0, 16.0, 21.0, 26.0, 32.0, 25.0, 0.83, 30.0, 22.0, 29.0, 28.0, 17.0, 33.0, 16.0, 23.0, 24.0, 29.0, 20.0, 46.0, 26.0, 59.0, 71.0, 23.0, 34.0, 34.0, 28.0, 21.0, 33.0, 37.0, 28.0, 21.0, 38.0, 47.0, 14.5, 22.0, 20.0, 17.0, 21.0, 70.5, 29.0, 24.0, 2.0, 21.0, 32.5, 32.5, 54.0, 12.0, 24.0, 45.0, 33.0, 20.0, 47.0, 29.0, 25.0, 23.0, 19.0, 37.0, 16.0, 24.0, 22.0, 24.0, 19.0, 18.0, 19.0, 27.0, 9.0, 36.5, 42.0, 51.0, 22.0, 55.5, 40.5, 51.0, 16.0, 30.0, 44.0, 40.0, 26.0, 17.0, 1.0, 9.0, 45.0, 28.0, 61.0, 4.0, 1.0, 21.0, 56.0, 18.0, 50.0, 30.0, 36.0, 9.0, 1.0, 4.0, 45.0, 40.0, 36.0, 32.0, 19.0, 19.0, 3.0, 44.0, 58.0, 42.0, 24.0, 28.0, 34.0, 45.5, 18.0, 2.0, 32.0, 26.0, 16.0, 40.0, 24.0, 35.0, 22.0, 30.0, 31.0, 27.0, 42.0, 32.0, 30.0, 16.0, 27.0, 51.0, 38.0, 22.0, 19.0, 20.5, 18.0, 35.0, 29.0, 59.0, 5.0, 24.0, 44.0, 8.0, 19.0, 33.0, 29.0, 22.0, 30.0, 44.0, 25.0, 24.0, 37.0, 54.0, 29.0, 62.0, 30.0, 41.0, 29.0, 30.0, 35.0, 50.0, 3.0, 52.0, 40.0, 36.0, 16.0, 25.0, 58.0, 35.0, 25.0, 41.0, 37.0, 63.0, 45.0, 7.0, 35.0, 65.0, 28.0, 16.0, 19.0, 33.0, 30.0, 22.0, 42.0, 22.0, 26.0, 19.0, 36.0, 24.0, 24.0, 23.5, 2.0, 50.0, 19.0, 0.92, 17.0, 30.0, 30.0, 24.0, 18.0, 26.0, 28.0, 43.0, 26.0, 24.0, 54.0, 31.0, 40.0, 22.0, 27.0, 30.0, 22.0, 36.0, 61.0, 36.0, 31.0, 16.0, 45.5, 38.0, 16.0, 29.0, 41.0, 45.0, 45.0, 2.0, 24.0, 28.0, 25.0, 36.0, 24.0, 40.0, 3.0, 42.0, 23.0, 15.0, 25.0, 28.0, 22.0, 38.0, 40.0, 29.0, 45.0, 35.0, 30.0, 60.0, 24.0, 25.0, 18.0, 19.0, 22.0, 3.0, 22.0, 27.0, 20.0, 19.0, 42.0, 1.0, 32.0, 35.0, 18.0, 1.0, 36.0, 17.0, 36.0, 21.0, 28.0, 23.0, 24.0, 22.0, 31.0, 46.0, 23.0, 28.0, 39.0, 26.0, 21.0, 28.0, 20.0, 34.0, 51.0, 3.0, 21.0, 33.0, 44.0, 34.0, 18.0, 30.0, 10.0, 21.0, 29.0, 28.0, 18.0, 28.0, 19.0, 32.0, 28.0, 42.0, 17.0, 50.0, 14.0, 21.0, 24.0, 64.0, 31.0, 45.0, 20.0, 25.0, 28.0, 4.0, 13.0, 34.0, 5.0, 52.0, 36.0, 30.0, 49.0, 29.0, 65.0, 50.0, 48.0, 34.0, 47.0, 48.0, 38.0, 56.0, 0.75, 38.0, 33.0, 23.0, 22.0, 34.0, 29.0, 22.0, 2.0, 9.0, 50.0, 63.0, 25.0, 35.0, 58.0, 30.0, 9.0, 21.0, 55.0, 71.0, 21.0, 54.0, 25.0, 24.0, 17.0, 21.0, 37.0, 16.0, 18.0, 33.0, 28.0, 26.0, 29.0, 36.0, 54.0, 24.0, 47.0, 34.0, 36.0, 32.0, 30.0, 22.0, 44.0, 40.5, 50.0, 39.0, 23.0, 2.0, 17.0, 30.0, 7.0, 45.0, 30.0, 22.0, 36.0, 9.0, 11.0, 32.0, 50.0, 64.0, 19.0, 33.0, 8.0, 17.0, 27.0, 22.0, 22.0, 62.0, 48.0, 39.0, 36.0, 40.0, 28.0, 24.0, 19.0, 29.0, 32.0, 62.0, 53.0, 36.0, 16.0, 19.0, 34.0, 39.0, 32.0, 25.0, 39.0, 54.0, 36.0, 18.0, 47.0, 60.0, 22.0, 35.0, 52.0, 47.0, 37.0, 36.0, 49.0, 49.0, 24.0, 44.0, 35.0, 36.0, 30.0, 27.0, 22.0, 40.0, 39.0, 35.0, 24.0, 34.0, 26.0, 4.0, 26.0, 27.0, 42.0, 20.0, 21.0, 21.0, 61.0, 57.0, 21.0, 26.0, 80.0, 51.0, 32.0, 9.0, 28.0, 32.0, 31.0, 41.0, 20.0, 24.0, 2.0, 0.75, 48.0, 19.0, 56.0, 23.0, 18.0, 21.0, 18.0, 24.0, 32.0, 23.0, 58.0, 50.0, 40.0, 47.0, 36.0, 20.0, 32.0, 25.0, 43.0, 40.0, 31.0, 70.0, 31.0, 18.0, 24.5, 18.0, 43.0, 36.0, 27.0, 20.0, 14.0, 60.0, 25.0, 14.0, 19.0, 18.0, 15.0, 31.0, 4.0, 25.0, 60.0, 52.0, 44.0, 49.0, 42.0, 18.0, 35.0, 18.0, 25.0, 26.0, 39.0, 45.0, 42.0, 22.0, 24.0, 48.0, 29.0, 52.0, 19.0, 38.0, 27.0, 33.0, 6.0, 17.0, 34.0, 50.0, 27.0, 20.0, 30.0, 25.0, 25.0, 29.0, 11.0, 23.0, 23.0, 28.5, 48.0, 35.0, 36.0, 21.0, 24.0, 31.0, 70.0, 16.0, 30.0, 19.0, 31.0, 4.0, 6.0, 33.0, 23.0, 48.0, 0.67, 28.0, 18.0, 34.0, 33.0, 41.0, 20.0, 36.0, 16.0, 51.0, 30.5, 32.0, 24.0, 48.0, 57.0, 54.0, 18.0, 5.0, 43.0, 13.0, 17.0, 29.0, 25.0, 25.0, 18.0, 8.0, 1.0, 46.0, 16.0, 25.0, 39.0, 49.0, 31.0, 30.0, 30.0, 34.0, 31.0, 11.0, 0.42, 27.0, 31.0, 39.0, 18.0, 39.0, 33.0, 26.0, 39.0, 35.0, 6.0, 30.5, 23.0, 31.0, 43.0, 10.0, 52.0, 27.0, 38.0, 27.0, 2.0, 1.0, 62.0, 15.0, 0.83, 23.0, 18.0, 39.0, 21.0, 32.0, 20.0, 16.0, 30.0, 34.5, 17.0, 42.0, 35.0, 28.0, 4.0, 74.0, 9.0, 16.0, 44.0, 18.0, 45.0, 51.0, 24.0, 41.0, 21.0, 48.0, 24.0, 42.0, 27.0, 31.0, 4.0, 26.0, 47.0, 33.0, 47.0, 28.0, 15.0, 20.0, 19.0, 56.0, 25.0, 33.0, 22.0, 28.0, 25.0, 39.0, 27.0, 19.0, 26.0, 32.0], 'Fare': [7.25, 71.2833, 7.925, 53.1, 8.05, 51.8625, 21.075, 11.1333, 30.0708, 16.7, 26.55, 8.05, 31.275, 7.8542, 16.0, 29.125, 18.0, 26.0, 13.0, 8.0292, 35.5, 21.075, 31.3875, 263.0, 27.7208, 10.5, 82.1708, 52.0, 8.05, 18.0, 11.2417, 9.475, 21.0, 41.5792, 7.8792, 17.8, 39.6875, 7.8, 76.7292, 26.0, 61.9792, 10.5, 7.2292, 27.75, 46.9, 7.2292, 80.0, 83.475, 27.9, 10.5, 8.1583, 7.925, 8.6625, 10.5, 46.9, 73.5, 14.4542, 56.4958, 7.65, 29.0, 12.475, 9.0, 9.5, 47.1, 10.5, 15.85, 34.375, 263.0, 8.05, 8.05, 7.8542, 61.175, 20.575, 7.25, 34.6542, 63.3583, 23.0, 26.0, 7.8958, 77.2875, 8.6542, 7.925, 7.8958, 7.65, 7.8958, 52.0, 14.4542, 8.05, 9.825, 14.4583, 7.925, 7.75, 21.0, 247.5208, 31.275, 73.5, 30.0708, 13.0, 77.2875, 11.2417, 7.1417, 6.975, 7.8958, 7.05, 14.5, 26.0, 13.0, 15.0458, 26.2833, 53.1, 9.2167, 79.2, 7.75, 15.85, 6.75, 11.5, 36.75, 7.7958, 34.375, 26.0, 13.0, 12.525, 66.6, 8.05, 14.5, 61.3792, 7.7333, 8.05, 16.1, 15.75, 7.775, 8.6625, 39.6875, 20.525, 27.9, 56.4958, 33.5, 29.125, 11.1333, 7.925, 30.6958, 7.8542, 28.7125, 13.0, 0.0, 31.3875, 39.0, 22.025, 26.55, 15.5, 7.8958, 13.0, 13.0, 7.8542, 26.0, 27.7208, 146.5208, 8.4042, 13.0, 9.5, 6.4958, 7.225, 8.05, 10.4625, 15.85, 18.7875, 7.75, 31.0, 7.05, 21.0, 7.25, 13.0, 113.275, 7.925, 27.0, 76.2917, 10.5, 8.05, 13.0, 8.05, 90.0, 9.35, 10.5, 7.25, 13.0, 83.475, 7.775, 13.5, 31.3875, 10.5, 26.0, 26.25, 10.5, 12.275, 10.5, 7.125, 7.225, 90.0, 7.775, 14.5, 52.5542, 26.0, 10.4625, 26.55, 16.1, 20.2125, 15.2458, 86.5, 512.3292, 26.0, 31.3875, 79.65, 0.0, 10.5, 39.6875, 7.775, 153.4625, 135.6333, 0.0, 19.5, 29.7, 77.9583, 7.75, 29.125, 20.25, 7.75, 7.8542, 9.5, 8.05, 8.6625, 9.5, 7.8958, 13.0, 7.75, 78.85, 91.0792, 12.875, 8.85, 7.8958, 7.2292, 151.55, 247.5208, 0.0, 151.55, 108.9, 24.0, 56.9292, 83.1583, 262.375, 26.0, 7.8958, 26.25, 7.8542, 26.0, 14.0, 164.8667, 134.5, 7.25, 7.8958, 12.35, 29.0, 135.6333, 6.2375, 13.0, 20.525, 57.9792, 28.5, 153.4625, 18.0, 66.6, 134.5, 8.05, 35.5, 26.0, 263.0, 13.0, 13.0, 13.0, 13.0, 13.0, 15.9, 8.6625, 9.225, 7.2292, 17.8, 9.5, 55.0, 13.0, 27.9, 27.7208, 14.4542, 7.05, 7.25, 75.25, 69.3, 55.4417, 6.4958, 8.05, 135.6333, 21.075, 7.25, 211.5, 4.0125, 7.775, 227.525, 15.7417, 7.925, 52.0, 73.5, 46.9, 13.0, 12.0, 120.0, 7.7958, 7.925, 113.275, 16.7, 7.7958, 7.8542, 26.0, 10.5, 12.65, 7.925, 8.05, 9.825, 15.85, 8.6625, 21.0, 7.75, 18.75, 7.775, 90.0, 7.925, 32.5, 13.0, 13.0, 24.15, 7.7333, 7.875, 14.4, 20.2125, 26.0, 26.0, 8.05, 26.55, 26.0, 7.125, 55.9, 120.0, 34.375, 18.75, 263.0, 10.5, 26.25, 9.5, 7.775, 13.0, 81.8583, 19.5, 26.55, 19.2583, 30.5, 27.75, 27.75, 89.1042, 7.8958, 26.55, 10.5, 26.55, 8.05, 38.5, 13.0, 7.05, 26.55, 19.2583, 8.6625, 27.75, 13.7917, 9.8375, 21.0, 7.0458, 7.5208, 12.2875, 46.9, 8.05, 9.5875, 91.0792, 90.0, 29.7, 8.05, 15.9, 7.25, 30.5, 49.5042, 8.05, 78.2667, 151.55, 7.7958, 8.6625, 7.75, 9.5875, 86.5, 108.9, 26.0, 22.525, 56.4958, 7.75, 26.2875, 59.4, 7.4958, 34.0208, 10.5, 26.0, 7.8958, 93.5, 7.8958, 57.9792, 7.75, 10.5, 7.925, 11.5, 26.0, 7.2292, 8.6625, 26.25, 26.55, 106.425, 49.5, 71.0, 31.275, 31.275, 26.0, 106.425, 26.0, 26.0, 20.525, 36.75, 110.8833, 26.0, 7.225, 7.775, 26.55, 39.6, 79.65, 17.4, 7.8958, 13.5, 24.15, 7.8958, 21.075, 7.8542, 10.5, 51.4792, 26.3875, 8.05, 14.5, 13.0, 55.9, 7.925, 30.0, 110.8833, 26.0, 40.125, 79.65, 15.0, 79.2, 8.05, 7.125, 78.2667, 7.25, 26.0, 24.15, 0.0, 56.9292, 27.0, 8.05, 26.55, 15.55, 7.8958, 30.5, 41.5792, 153.4625, 31.275, 8.05, 65.0, 14.4, 16.1, 39.0, 10.5, 14.4542, 52.5542, 15.7417, 7.8542, 16.1, 32.3208, 12.35, 77.9583, 7.8958, 30.0, 7.0542, 30.5, 27.9, 13.0, 7.925, 26.25, 39.6875, 7.8542, 69.3, 27.9, 19.2583, 76.7292, 7.8958, 35.5, 7.55, 23.0, 8.4333, 6.75, 73.5, 15.5, 13.0, 113.275, 133.65, 7.225, 25.5875, 7.4958, 7.925, 73.5, 13.0, 8.05, 39.0, 52.0, 10.5, 13.0, 7.775, 8.05, 9.8417, 46.9, 512.3292, 76.7292, 9.225, 46.9, 39.0, 41.5792, 39.6875, 10.1708, 7.7958, 211.3375, 57.0, 13.4167, 7.225, 26.55, 13.5, 8.05, 110.8833, 7.65, 227.525, 26.2875, 14.4542, 7.7417, 7.8542, 26.0, 13.5, 26.2875, 151.55, 49.5042, 52.0, 9.4833, 13.0, 7.65, 227.525, 10.5, 7.775, 33.0, 7.0542, 13.0, 13.0, 53.1, 8.6625, 21.0, 26.0, 7.925, 211.3375, 18.7875, 13.0, 13.0, 16.1, 34.375, 512.3292, 78.85, 262.375, 16.1, 7.925, 71.0, 20.25, 13.0, 53.1, 7.75, 23.0, 12.475, 9.5, 7.8958, 65.0, 14.5, 7.7958, 11.5, 8.05, 86.5, 7.125, 7.2292, 120.0, 7.775, 77.9583, 7.75, 8.3625, 9.5, 7.8542, 10.5, 23.0, 7.75, 12.475, 211.3375, 7.2292, 57.0, 30.0, 7.05, 7.25, 7.4958, 29.125, 20.575, 79.2, 26.0, 7.8958, 13.0, 25.9292, 8.6833, 7.2292, 24.15, 13.0, 26.25, 120.0, 8.5167, 6.975, 7.775, 0.0, 7.775, 13.0, 53.1, 7.8875, 24.15, 10.5, 31.275, 8.05, 7.925, 37.0042, 6.45, 27.9, 93.5, 8.6625, 0.0, 12.475, 39.6875, 37.0042, 80.0, 14.4542, 18.75, 7.8542, 8.3, 83.1583, 8.6625, 56.4958, 7.925, 10.5, 31.0, 6.4375, 8.6625, 7.55, 7.8958, 33.0, 31.275, 7.775, 15.2458, 39.4, 26.0, 9.35, 164.8667, 26.55, 19.2583, 14.1083, 11.5, 25.9292, 13.0, 13.0, 13.8583, 50.4958, 11.1333, 7.8958, 52.5542, 5.0, 9.0, 24.0, 7.225, 9.8458, 7.8958, 83.1583, 26.0, 7.8958, 10.5167, 10.5, 7.05, 29.125, 13.0, 30.0, 30.0, 7.75]}}

    #temporary function to recover scatterplot object keys

    keys = [i for i in s['scatterplot_data']]

    print(keys)

    return render_template("relationships.html", obj=o, scatter=s, _keys=keys)


@app.route("/user/<id>")
def get_user(id):
    return f"<h1> Hi user: {id}"


@app.route("/overview")
def overview():
    #temp load
    data = pd.read_csv(os.path.join('/mnt/c/Users/matth/workspace/eda_viz/src/eda/data', "train.csv"))

    test_overview = {'overview': [{'rows': 891}, {'variables': 12}, {'missing': {'count': 866, 'proportion': 0.08099513655069211}}, {'missing_plot': {'x': ['Cabin', 'Age', 'Embarked', 'PassengerId', 'Survived', 'Pclass', 'Name', 'Sex', 'SibSp', 'Parch', 'Ticket', 'Fare'], 'y': [687, 177, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0]}}, {'duplicates': {'num_duplicates': 0, 'proportion_duplicated': 0.0}}, {'example': {'head': {'PassengerId': {0: 1, 1: 2, 2: 3, 3: 4, 4: 5}, 'Survived': {0: 0, 1: 1, 2: 1, 3: 1, 4: 0}, 'Pclass': {0: 3, 1: 1, 2: 3, 3: 1, 4: 3}, 'Name': {0: 'Braund, Mr. Owen Harris', 1: 'Cumings, Mrs. John Bradley (Florence Briggs Thayer)', 2: 'Heikkinen, Miss. Laina', 3: 'Futrelle, Mrs. Jacques Heath (Lily May Peel)', 4: 'Allen, Mr. William Henry'}, 'Sex': {0: 'male', 1: 'female', 2: 'female', 3: 'female', 4: 'male'}, 'Age': {0: 22.0, 1: 38.0, 2: 26.0, 3: 35.0, 4: 35.0}, 'SibSp': {0: 1, 1: 1, 2: 0, 3: 1, 4: 0}, 'Parch': {0: 0, 1: 0, 2: 0, 3: 0, 4: 0}, 'Ticket': {0: 'A/5 21171', 1: 'PC 17599', 2: 'STON/O2. 3101282', 3: '113803', 4: '373450'}, 'Fare': {0: 7.25, 1: 71.2833, 2: 7.925, 3: 53.1, 4: 8.05}, 'Cabin': {0: 'nan', 1: 'C85', 2: 'nan', 3: 'C123', 4: 'nan'}, 'Embarked': {0: 'S', 1: 'C', 2: 'S', 3: 'S', 4: 'S'}}, 'tail': {'PassengerId': {886: 887, 887: 888, 888: 889, 889: 890, 890: 891}, 'Survived': {886: 0, 887: 1, 888: 0, 889: 1, 890: 0}, 'Pclass': {886: 2, 887: 1, 888: 3, 889: 1, 890: 3}, 'Name': {886: 'Montvila, Rev. Juozas', 887: 'Graham, Miss. Margaret Edith', 888: 'Johnston, Miss. Catherine Helen "Carrie"', 889: 'Behr, Mr. Karl Howell', 890: 'Dooley, Mr. Patrick'}, 'Sex': {886: 'male', 887: 'female', 888: 'female', 889: 'male', 890: 'male'}, 'Age': {886: 27.0, 887: 19.0, 888: 'nan', 889: 26.0, 890: 32.0}, 'SibSp': {886: 0, 887: 0, 888: 1, 889: 0, 890: 0}, 'Parch': {886: 0, 887: 0, 888: 2, 889: 0, 890: 0}, 'Ticket': {886: '211536', 887: '112053', 888: 'W./C. 6607', 889: '111369', 890: '370376'}, 'Fare': {886: 13.0, 887: 30.0, 888: 23.45, 889: 30.0, 890: 7.75}, 'Cabin': {886: 'nan', 887: 'B42', 888: 'nan', 889: 'C148', 890: 'nan'}, 'Embarked': {886: 'S', 887: 'S', 888: 'S', 889: 'C', 890: 'Q'}}}}, {'data_types': {'PassengerId': {'original_dtype': 'int64', 'mapped_dtype': 'numeric'}, 'Survived': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'}, 'Pclass': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'}, 'Name': {'original_dtype': 'object', 'mapped_dtype': 'categorical'}, 'Sex': {'original_dtype': 'object', 'mapped_dtype': 'categorical'}, 'Age': {'original_dtype': 'float64', 'mapped_dtype': 'numeric'}, 'SibSp': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'}, 'Parch': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'}, 'Ticket': {'original_dtype': 'object', 'mapped_dtype': 'categorical'}, 'Fare': {'original_dtype': 'float64', 'mapped_dtype': 'numeric'}, 'Cabin': {'original_dtype': 'object', 'mapped_dtype': 'categorical'}, 'Embarked': {'original_dtype': 'object', 'mapped_dtype': 'categorical'}}}, {'mapped_type_count': {'numeric': 3, 'categorical': 9}}]}
    over = {'overview': [{'rows': 891},
  {'variables': 12},
  {'missing': {'count': 866, 'proportion': 0.08099513655069211}},
  {'missing_plot': {'x': ['Cabin',
     'Age',
     'Embarked',
     'PassengerId',
     'Survived',
     'Pclass',
     'Name',
     'Sex',
     'SibSp',
     'Parch',
     'Ticket',
     'Fare'],
    'y': [687, 177, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0]}},
  {'duplicates': {'count': 0, 'proportion': 0.0}},
  {'head': {'PassengerId': {0: 1, 1: 2, 2: 3, 3: 4, 4: 5},
    'Survived': {0: 0, 1: 1, 2: 1, 3: 1, 4: 0},
    'Pclass': {0: 3, 1: 1, 2: 3, 3: 1, 4: 3},
    'Name': {0: 'Braund, Mr. Owen Harris',
     1: 'Cumings, Mrs. John Bradley (Florence Briggs Thayer)',
     2: 'Heikkinen, Miss. Laina',
     3: 'Futrelle, Mrs. Jacques Heath (Lily May Peel)',
     4: 'Allen, Mr. William Henry'},
    'Sex': {0: 'male', 1: 'female', 2: 'female', 3: 'female', 4: 'male'},
    'Age': {0: 22.0, 1: 38.0, 2: 26.0, 3: 35.0, 4: 35.0},
    'SibSp': {0: 1, 1: 1, 2: 0, 3: 1, 4: 0},
    'Parch': {0: 0, 1: 0, 2: 0, 3: 0, 4: 0},
    'Ticket': {0: 'A/5 21171',
     1: 'PC 17599',
     2: 'STON/O2. 3101282',
     3: '113803',
     4: '373450'},
    'Fare': {0: 7.25, 1: 71.2833, 2: 7.925, 3: 53.1, 4: 8.05},
    'Cabin': {0: 'nan', 1: 'C85', 2: 'nan', 3: 'C123', 4: 'nan'},
    'Embarked': {0: 'S', 1: 'C', 2: 'S', 3: 'S', 4: 'S'}}},
  {'tail': {'PassengerId': {886: 887, 887: 888, 888: 889, 889: 890, 890: 891},
    'Survived': {886: 0, 887: 1, 888: 0, 889: 1, 890: 0},
    'Pclass': {886: 2, 887: 1, 888: 3, 889: 1, 890: 3},
    'Name': {886: 'Montvila, Rev. Juozas',
     887: 'Graham, Miss. Margaret Edith',
     888: 'Johnston, Miss. Catherine Helen Carrie',
     889: 'Behr, Mr. Karl Howell',
     890: 'Dooley, Mr. Patrick'},
    'Sex': {886: 'male',
     887: 'female',
     888: 'female',
     889: 'male',
     890: 'male'},
    'Age': {886: 27.0, 887: 19.0, 888: 'nan', 889: 26.0, 890: 32.0},
    'SibSp': {886: 0, 887: 0, 888: 1, 889: 0, 890: 0},
    'Parch': {886: 0, 887: 0, 888: 2, 889: 0, 890: 0},
    'Ticket': {886: '211536',
     887: '112053',
     888: 'W./C. 6607',
     889: '111369',
     890: '370376'},
    'Fare': {886: 13.0, 887: 30.0, 888: 23.45, 889: 30.0, 890: 7.75},
    'Cabin': {886: 'nan', 887: 'B42', 888: 'nan', 889: 'C148', 890: 'nan'},
    'Embarked': {886: 'S', 887: 'S', 888: 'S', 889: 'C', 890: 'Q'}}},
  {'data_types': {'PassengerId': {'original_dtype': 'int64',
     'mapped_dtype': 'numeric'},
    'Survived': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'},
    'Pclass': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'},
    'Name': {'original_dtype': 'object', 'mapped_dtype': 'categorical'},
    'Sex': {'original_dtype': 'object', 'mapped_dtype': 'categorical'},
    'Age': {'original_dtype': 'float64', 'mapped_dtype': 'numeric'},
    'SibSp': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'},
    'Parch': {'original_dtype': 'int64', 'mapped_dtype': 'categorical'},
    'Ticket': {'original_dtype': 'object', 'mapped_dtype': 'categorical'},
    'Fare': {'original_dtype': 'float64', 'mapped_dtype': 'numeric'},
    'Cabin': {'original_dtype': 'object', 'mapped_dtype': 'categorical'},
    'Embarked': {'original_dtype': 'object', 'mapped_dtype': 'categorical'}}},
  {'mapped_type_count': {'numeric': 3, 'categorical': 9}}]}
    return render_template("overview.html", overview=over)

@app.route("/variables")
def variables():
    print("accessing variable route")
    obj = [{'PassengerId': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 891, 'proportion': 1.0}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': [878, 723, 562, 742, 210, 219, 643, 860, 635]},
   {'distribution': {'x': [1.0,
      90.0,
      179.0,
      268.0,
      357.0,
      446.0,
      535.0,
      624.0,
      713.0,
      802.0,
      891.0],
     'y': [89, 89, 89, 89, 89, 89, 89, 89, 89, 90]}},
   {'stats': {'mean': 446.0,
     'variance': 66231.0,
     'std': 257.3538420152301,
     'min': 1,
     'Q25': 223.5,
     'median': 446.0,
     'Q75': 668.5,
     'max': 891,
     'range': 890,
     'IQR': 445.0,
     'skew': 0.0,
     'kurtosis': -1.1999999999999997,
     'sum': 397386}},
    {'data_type': 'numeric'}]},
 {'Survived': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 2, 'proportion': 0.002244668911335578}},
   {'zeros': {'count': 549, 'proportion': 0.6161616161616161}},
   {'example': [0, 1, 0, 0, 1, 0, 0, 0, 0]},
   {'distribution': {'x': [0, 1], 'y': [549, 342]}},
   {'stats': {'mode': 0, 'entropy': 0.6659119735267652}},
     {'data_type': 'categorical'},
 ]},
 {'Pclass': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 3, 'proportion': 0.003367003367003367}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': [3, 3, 2, 3, 3, 3, 3, 2, 3]},
   {'distribution': {'x': [3, 1, 2], 'y': [491, 216, 184]}},
   {'stats': {'mode': 3, 'entropy': 0.9976616191577423}},
    {'data_type': 'categorical'},]},
 {'Name': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 891, 'proportion': 1.0}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': ['Arnold-Franchi, Mrs. Josef (Josefine Franchi)',
     'Spedden, Mrs. Frederic Oakley (Margaretta Corning Stone)',
     'Laroche, Miss. Simonne Marie Anne Andree',
     'Ekstrom, Mr. Johan',
     'Richards, Master. William Rowe',
     'Risien, Mr. Samuel Beard',
     'Canavan, Miss. Mary',
     'McCarthy, Mr. Timothy J',
     'Devaney, Miss. Margaret Delia']},
   {'distribution': {'x': ['Braund, Mr. Owen Harris',
      'Boulos, Mr. Hanna',
      'Frolicher-Stehli, Mr. Maxmillian',
      'Gilinski, Mr. Eliezer',
      'Murdlin, Mr. Joseph',
      'other'],
     'y': [1, 1, 1, 1, 1, 886]}},
   {'stats': {'mode': 'Abbing, Mr. Anthony', 'entropy': 6.792344427470811}},
           {'data_type': 'categorical'}]},
 {'Sex': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 2, 'proportion': 0.002244668911335578}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': ['female',
     'female',
     'male',
     'female',
     'male',
     'male',
     'female',
     'male',
     'female']},
   {'distribution': {'x': ['male', 'female'], 'y': [577, 314]}},
   {'stats': {'mode': 'male', 'entropy': 0.6489276088957644}},
    {'data_type': 'categorical'}]},
 {'Age': [
   {'missing': {'count': 177, 'proportion': 0.19865319865319866}},
   {'distinct': {'count': 88, 'proportion': 0.09876543209876543}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': [22.0, 19.0, 29.0, 4.0, 45.0, 18.0, 25.0, 34.0, 49.0]},
   {'distribution': {'x': [0.42,
      8.378,
      16.336000000000002,
      24.294000000000004,
      32.252,
      40.21,
      48.168000000000006,
      56.126000000000005,
      64.084,
      72.042,
      80.0],
     'y': [54, 46, 177, 169, 118, 70, 45, 24, 9, 2]}},
   {'stats': {'mean': 29.69911764705882,
     'variance': 211.0191247463081,
     'std': 14.526497332334044,
     'min': 0.42,
     'Q25': 20.125,
     'median': 28.0,
     'Q75': 38.0,
     'max': 80.0,
     'range': 79.58,
     'IQR': 17.875,
     'skew': 0.38910778230082704,
     'kurtosis': 0.17827415364210353,
     'sum': 21205.17}},
    {'data_type': 'numeric'}]},
 {'SibSp': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 7, 'proportion': 0.007856341189674524}},
   {'zeros': {'count': 608, 'proportion': 0.6823793490460157}},
   {'example': [0, 0, 0, 0, 1, 0, 0, 2, 0]},
   {'distribution': {'x': [0, 1, 2, 4, 3, 'other'],
     'y': [608, 209, 28, 18, 16, 12]}},
   {'stats': {'mode': 0, 'entropy': 0.9278185183972899}},
    {'data_type': 'categorical'}]},
 {'Parch': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 7, 'proportion': 0.007856341189674524}},
   {'zeros': {'count': 678, 'proportion': 0.7609427609427609}},
   {'example': [1, 0, 0, 0, 0, 0, 1, 1, 2]},
   {'distribution': {'x': [0, 1, 2, 5, 3, 'other'],
     'y': [678, 118, 80, 5, 5, 5]}},
   {'stats': {'mode': 0, 'entropy': 0.7821038727533371}},
    {'data_type': 'categorical'}]},
 {'Ticket': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 681, 'proportion': 0.7643097643097643}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': ['112059',
     '29104',
     '29105',
     'A/4 48871',
     'STON/O2. 3101271',
     '370365',
     'S.C./PARIS 2079',
     '347082',
     '2651']},
   {'distribution': {'x': ['347082',
      'CA. 2343',
      '1601',
      '3101295',
      'CA 2144',
      'other'],
     'y': [7, 7, 7, 6, 6, 858]}},
   {'stats': {'mode': '1601', 'entropy': 6.399828873350447}},
    {'data_type': 'categorical'}]},
 {'Fare': [
   {'missing': {'count': 0, 'proportion': 0.0}},
   {'distinct': {'count': 248, 'proportion': 0.2783389450056117}},
   {'zeros': {'count': 15, 'proportion': 0.016835016835016835}},
   {'example': [90.0,
     13.4167,
     7.8958,
     7.0542,
     31.275,
     8.05,
     90.0,
     7.8958,
     30.0]},
   {'distribution': {'x': [0.0,
      51.23292,
      102.46584,
      153.69876,
      204.93168,
      256.1646,
      307.39752,
      358.63044,
      409.86336,
      461.09628,
      512.3292],
     'y': [732, 106, 31, 2, 11, 6, 0, 0, 0, 3]}},
   {'stats': {'mean': 32.2042079685746,
     'variance': 2469.436845743117,
     'std': 49.693428597180905,
     'min': 0.0,
     'Q25': 7.9104,
     'median': 14.4542,
     'Q75': 31.0,
     'max': 512.3292,
     'range': 512.3292,
     'IQR': 23.0896,
     'skew': 4.787316519674893,
     'kurtosis': 33.39814088089868,
     'sum': 28693.9493}},
    {'data_type': 'numeric'}]},
 {'Cabin': [
   {'missing': {'count': 687, 'proportion': 0.7710437710437711}},
   {'distinct': {'count': 147, 'proportion': 0.16498316498316498}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': ['E36',
     'C54',
     'E49',
     'D20',
     'D56',
     'B50',
     'E25',
     'E12',
     'C92']},
   {'distribution': {'x': ['B96 B98',
      'G6',
      'C23 C25 C27',
      'C22 C26',
      'F33',
      'other'],
     'y': [4, 4, 4, 3, 3, 186]}},
   {'stats': {'mode': 'B96 B98', 'entropy': 4.897561648814725}},
    {'data_type': 'categorical'}]},
 {'Embarked': [
   {'missing': {'count': 2, 'proportion': 0.002244668911335578}},
   {'distinct': {'count': 3, 'proportion': 0.003367003367003367}},
   {'zeros': {'count': 0, 'proportion': 0.0}},
   {'example': ['S', 'S', 'S', 'S', 'S', 'S', 'S', 'Q', 'S']},
   {'distribution': {'x': ['S', 'C', 'Q'], 'y': [644, 168, 77]}},
   {'stats': {'mode': 'S', 'entropy': 0.7602918973432804}},
   {'data_type': 'categorical'}]}]

    keys = []
    for i in range(len(obj)):
        keys.append(list(obj[i].keys())[0])

    _map = {}

    for i in range(len(obj)):
        k = list(obj[i].keys())[0]
        if k != "overview":
            _map[k] = obj[i][k][6]["data_type"]



    return render_template("variables.html", keys=keys, obj=obj, _map=_map)